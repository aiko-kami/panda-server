<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Project Example</title>
	</head>
	<body>
		<h1>Project Example</h1>
		<h2>Create new project</h2>
		<br />
		<form method="post" id="newProject">
			<label for="title">Project title*:</label>
			<input type="text" id="title" /><br /><br />
			<label for="goal">Goal*:</label>
			<input type="text" id="goal" /><br /><br />
			<label for="summary">Summary*:</label>
			<input type="text" id="summary" /><br /><br />
			<label for="description">Description*:</label>
			<input type="text" id="description" /><br /><br />
			<label for="categoryId">Category*:</label>
			<input type="text" id="categoryId" /><br /><br />
			<label for="subCategory">Sub-category*:</label>
			<input type="text" id="subCategory" /><br /><br />
			<label for="tag1">Tag 1:</label>
			<input type="text" id="tag1" /><br /><br />
			<label for="tag2">Tag 2:</label>
			<input type="text" id="tag2" /><br /><br />
			<label for="tag3">Tag 3:</label>
			<input type="text" id="tag3" /><br /><br />
			<label for="city">City:</label>
			<input type="text" id="city" /><br /><br />
			<label for="country">Country:</label>
			<input type="text" id="country" /><br /><br />
			<label for="talentsNeeded">Talents needed*:</label>
			<input type="text" id="talentsNeeded" /><br /><br />
			<label for="startDate">Start date:</label>
			<input type="text" id="startDate" /><br /><br />
			<label for="objectives">Objectives:</label>
			<input type="text" id="objectives" /><br /><br />
			<label for="creatorMotivation">Motivation:</label>
			<input type="text" id="creatorMotivation" /><br /><br />
			<label for="visibility">Visibility*:</label>
			<input type="text" id="visibility" /><br /><br />
			<label for="attachments">Attachments:</label>
			<input type="text" id="attachments" /><br /><br />
			<button type="submit">Submit</button>
		</form>
		<script>
			const form = document.querySelector("#newProject");

			form.addEventListener("submit", function (event) {
				// stop form submission
				event.preventDefault();

				const tag1 = document.getElementById("tag1").value;
				const tag2 = document.getElementById("tag2").value;
				const tag3 = document.getElementById("tag3").value;

				const projectInputs = {
					title: document.getElementById("title").value,
					goal: document.getElementById("goal").value,
					summary: document.getElementById("summary").value,
					description: document.getElementById("description").value,
					categoryId: document.getElementById("categoryId").value,
					subCategory: document.getElementById("subCategory").value,
					tagsIds: [tag1, tag2, tag3],
					location: {
						city: document.getElementById("city").value,
						country: document.getElementById("country").value,
					},
					talentsNeeded: [document.getElementById("talentsNeeded").value],
					startDate: document.getElementById("startDate").value,
					objectives: [document.getElementById("objectives").value],
					creatorMotivation: document.getElementById("creatorMotivation").value,
					visibility: document.getElementById("visibility").value,
					attachments: [document.getElementById("attachments").value],
				};

				console.log("Form submitted");
				console.log("Processing......");

				// Send data to the backend
				fetch("http://localhost:8080/projects/project", {
					// fetch("https://panda-server-37m0.onrender.com/projects/project", {
					method: "POST",
					headers: {
						"Content-Type": "application/json",
					},
					body: JSON.stringify({ projectInputs }),
				})
					.then((response) => {
						console.log("Data processed!");
						return response.json();
					})
					.then((data) => {
						// Handle the response from the backend
						console.log(data.message);
					})
					.catch((error) => {
						console.error("Error:", error);
					});
			});
		</script>
	</body>
</html>
